# -----------------------------
# Servidor da aplicação
# -----------------------------
server.port=${PORT:${SERVER_PORT:8080}}

# -----------------------------
# Datasource Oracle ADB (via TNS + Wallet)
# Use o TNS name "luigarah_tp" (recomendado para apps)
# -----------------------------
# JDBC via TNS + Wallet (produção)
spring.datasource.url=jdbc:oracle:thin:@${ORACLE_TNS_ALIAS}?TNS_ADMIN=${TNS_ADMIN}
spring.datasource.username=${ORACLE_USERNAME}
spring.datasource.password=${ORACLE_PASSWORD}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Define o schema padrão (tabelas sem schema vão para APP_LUIGARAH)
spring.jpa.properties.hibernate.default_schema=APP_LUIGARAH

# -----------------------------
# JPA / Hibernate
# -----------------------------
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# -----------------------------
# Pool de conexões (Hikari)
# Para ADB Always Free mantenha pool modesto
# -----------------------------
spring.datasource.hikari.pool-name=Hikari-Oracle
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL

# -----------------------------
# Flyway
# -----------------------------
spring.flyway.enabled=true
spring.flyway.clean-disabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.default-schema=APP_LUIGARAH
spring.flyway.schemas=APP_LUIGARAH

# -----------------------------
# Swagger
# -----------------------------
springdoc.swagger-ui.path=/

# -----------------------------
# CORS
# -----------------------------
app.cors.origens-permitidas=http://localhost:3000,https://luigarah.vercel.app

# -----------------------------
# Logs
# -----------------------------
logging.level.com.luigarah=DEBUG
